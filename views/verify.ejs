<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Email - IUT Marketplace</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .auth-container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            text-align: center;
            letter-spacing: 5px;
            font-size: 1.2rem;
        }

        .btn {
            width: 100%;
            padding: 0.8rem;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .alert {
            color: red;
            margin-bottom: 1rem;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="auth-container">
        <h2 style="text-align: center;">Verify Email</h2>
        <p style="text-align: center;">We sent a code to <br><strong>
                <%= typeof email !='undefined' ? email : 'your email' %>
            </strong></p>

        <div id="timer" style="text-align: center; color: #CC2936; font-weight: bold; margin-bottom: 20px;">
            Time remaining: 05:00
        </div>

        <% if (locals.error && locals.error.length> 0) { %>
            <div class="alert">
                <%= error %>
            </div>
            <% } %>

                <form action="/auth/verify" method="POST">
                    <input type="hidden" name="email" value="<%= typeof email != 'undefined' ? email : '' %>">
                    <div class="form-group">
                        <label style="text-align: center;">Enter 6-digit Code</label>
                        <input type="text" name="otp" required maxlength="6" placeholder="123456">
                    </div>
                    <button type="submit" class="btn">Verify</button>
                </form>

                <script>
                    // Simple 5 minute timer
                    let timeLeft = 300; // 5 minutes in seconds
                    const timerElement = document.getElementById('timer');

                    const countdown = setInterval(() => {
                        const minutes = Math.floor(timeLeft / 60);
                        let seconds = timeLeft % 60;

                        seconds = seconds < 10 ? '0' + seconds : seconds;

                        timerElement.innerHTML = `Time remaining: ${minutes}:${seconds}`;

                        if (timeLeft <= 0) {
                            clearInterval(countdown);
                            timerElement.innerHTML = "Code Expired";
                            timerElement.style.color = "red";
                        }

                        timeLeft--;
                    }, 1000);
                </script>
                <!-- Resend link could go here -->
    </div>
</body>

</html>